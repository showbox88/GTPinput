# GTPinput ğŸ’°
**GPT æ™ºèƒ½è®°è´¦ç³»ç»Ÿ V3.0**

è¿™æ˜¯ä¸€ä¸ªç”± GPT é©±åŠ¨çš„ä¸ªäººè®°è´¦å…¨æ ˆç³»ç»Ÿï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€è®°è´¦ã€è‡ªåŠ¨å‘¨æœŸæ‰£æ¬¾ã€æœˆåº¦é¢„ç®—ç®¡ç†ï¼Œå¹¶é€šè¿‡ç¾è§‚çš„ Streamlit ä»ªè¡¨ç›˜è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚

---

## âœ¨ V3.0 æ–°ç‰¹æ€§

### 1. ğŸ“… æœˆåº¦é¢„ç®—ç®¡ç† (Monthly Budgets)
- **è‡ªåŠ¨è½®è½¬**ï¼šé¢„ç®—è¿›åº¦æŒ‰æœˆè‡ªåŠ¨é‡ç½®ã€‚
- **å¯è§†åŒ–è¿›åº¦æ¡**ï¼šè‡ªå®šä¹‰ CSS å®ç°çš„é«˜é¢œå€¼è¿›åº¦æ¡ï¼Œæ”¯æŒæ˜äº®/æš—é»‘åŒæ¨¡å¼ã€‚
- **å›¾æ ‡é˜µåˆ—**ï¼š10x4 äº¤äº’å¼ Emoji é€‰æ‹©é¢æ¿ï¼Œè®©æ¯ä¸ªåˆ†ç±»éƒ½ä¸ªæ€§åè¶³ã€‚

### 2. ğŸ”„ è‡ªåŠ¨å‘¨æœŸæ‰£æ¬¾ (Recurring Expenses)
- **å›ºå®šå¼€é”€è‡ªåŠ¨åŒ–**ï¼šæ”¯æŒâ€œæˆ¿ç§Ÿâ€ã€â€œè®¢é˜…è´¹â€ç­‰å›ºå®šæ”¯å‡ºçš„è‡ªåŠ¨è®°å½•ã€‚
- **Cron è§¦å‘**ï¼šåŸºäº Cloudflare Cron Triggersï¼Œæ¯å¤©è‡ªåŠ¨æ£€æŸ¥å¹¶ç”Ÿæˆè´¦å•ã€‚
- **çµæ´»é…ç½®**ï¼šæ”¯æŒæŒ‰å‘¨ã€æŒ‰æœˆã€æŒ‰å¹´è®¾ç½®è§„åˆ™ï¼ˆå¦‚â€œæ¯æœˆ 1 æ—¥â€ã€â€œæ¯å‘¨äº”â€ï¼‰ã€‚

### 3. ğŸ¤– GPT èƒ½åŠ›å‡çº§ (Custom GPT Actions)
- **ä¸ä»…æ˜¯è®°å½•**ï¼šç°åœ¨èµ‹äºˆäº† GPT **åˆ é™¤**å’Œ**ä¿®æ”¹**è®°å½•çš„æƒé™ã€‚
- **è‡ªç„¶è¯­è¨€æ“ä½œ**ï¼š
    - "æŠŠæ˜¨å¤©é‚£ç¬”æ‰“è½¦è´¹åˆ äº†"
    - "æˆ¿ç§Ÿé‡‘é¢æ”¹æˆ 2600"
    - "æŸ¥ä¸€ä¸‹ä¸Šå‘¨åƒé¥­èŠ±äº†å¤šå°‘"

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```mermaid
graph TD
    User(ç”¨æˆ·/GPT) -->|è¯­éŸ³/æ–‡å­—| API(Cloudflare Worker)
    Cron(Cron Trigger) -->|æ¯æ—¥è§¦å‘| API
    
    API -->|SQL| DB[(Cloudflare D1 SQLite)]
    
    Streamlit(Streamlit Dashboard) -->|GET /list| API
    Streamlit -->|POST /update| API
    Streamlit -->|POST /delete| API
    
    API -->|JSON| Streamlit
```

---

## ğŸ› ï¸ API æ¥å£ (Cloudflare Worker)

æ‰€æœ‰æ“ä½œå‡éœ€ `X-API-Key` é‰´æƒã€‚

### æ ¸å¿ƒè®°è´¦
| æ–¹æ³• | è·¯å¾„ | æè¿° |
|---|---|---|
| `POST` | `/add` | è‡ªç„¶è¯­è¨€è®°è´¦ (GPT è§£æ) |
| `GET` | `/list` | è·å–æœ€è¿‘è®°å½• |
| `POST` | `/update` | **[NEW]** ä¿®æ”¹è®°å½• (ID) |
| `POST` | `/delete` | **[NEW]** åˆ é™¤è®°å½• (ID) |

### é¢„ç®—ä¸å‘¨æœŸ
| æ–¹æ³• | è·¯å¾„ | æè¿° |
|---|---|---|
| `GET` | `/budget/list` | è·å–é¢„ç®—åˆ—è¡¨ |
| `POST` | `/budget/add` | æ–°å¢é¢„ç®— |
| `POST` | `/budget/delete` | åˆ é™¤é¢„ç®— |
| `GET` | `/recurring/list` | è·å–å›ºå®šè§„åˆ™åˆ—è¡¨ |
| `POST` | `/recurring/add` | æ–°å¢è§„åˆ™ |
| `GET` | `/recurring/check` | æ‰‹åŠ¨è§¦å‘è§„åˆ™æ£€æŸ¥ |

---

## ğŸ–¥ï¸ éƒ¨ç½²æŒ‡å—

### 1. Cloudflare Worker (åç«¯)
éœ€è¦ç»‘å®š D1 æ•°æ®åº“ (`expense_db`) å’Œè®¾ç½® `APP_API_KEY` / `OPENAPI_API_KEY` ç¯å¢ƒå˜é‡ã€‚

**å…³é”®é…ç½® (wrangler.toml)**:
```toml
[[d1_databases]]
binding = "expense_db"
database_name = "expense-db"
database_id = "your-id"

[triggers]
crons = ["0 0 * * *"] # æ¯å¤©åˆå¤œè§¦å‘
```

### 2. Streamlit Dashboard (å‰ç«¯)
æœ¬åœ°è¿è¡Œæˆ–éƒ¨ç½²åˆ° Streamlit Cloudã€‚

```bash
pip install -r requirements.txt
streamlit run app.py
```

é…ç½®æ–‡ä»¶ `.streamlit/secrets.toml`:
```toml
[general]
API_URL = "https://your-worker.workers.dev"
API_KEY = "your-key"
```

---

## ğŸ“ å¾…åŠè®¡åˆ’ (Roadmap)
- [ ] å¤šè´¦æˆ·/å¤šå¸ç§æ”¯æŒ
- [ ] å¯¼å‡º Excel/CSV æŠ¥è¡¨
- [ ] å¹´åº¦æ¶ˆè´¹æ·±åº¦åˆ†ææŠ¥å‘Š
